<md-toolbar class="md-accent" id="tripsToolbar">
  <div class="md-toolbar-tools">
    <h3>{{ $state.current.data.pageTitle }}</h3>&nbsp;<p ng-show="trip.id">{{ trip.id }}</p>
    <span flex></span>
    <ng-include src="'tpl/widgets/fab/details-toolbar.html'"></ng-include>
  </div>
  <md-progress-linear md-mode="indeterminate"
                      ng-show="processing"></md-progress-linear>
</md-toolbar>

<md-content flex layout-padding
            class="grid-container"
            id="tripFormContainer"
            ng-show="carriers.length">

  <form name="tripForm" role="form">
    <div class="form-body" layout="column">
      <!--
        Driver username *
        Driver email *
        Driver phone number *
        From city *
        Destination city *
        Max shipment weight(?)
        Shipment type (?)
        Shipment size
        Departure date/time
        Expected delivery date/time
      -->
      <md-list layout="row" flex-gt-sm>
        <md-list-item>
          <md-input-container class="md-block" layout="column" layout-align="start center">
            <label for="carrierSelect">Carrier</label>
            <md-select name="carrier"
                       required
                       ng-model="carrier"
                       id="carrierSelect"
                       placeholder="Select Carrier">
              <md-optgroup label="Carrier">
                <md-option ng-value="carrier" ng-repeat="carrier in carriers">{{carrier.attributes.username}}
                </md-option>
              </md-optgroup>
            </md-select>
            <div ng-messages="tripForm.carrierId.$error">
              <div ng-message="required" ng-show="tripForm.carrierId.$error.required">Carrier is required for Trip</div>
            </div>
          </md-input-container>
        </md-list-item>

        <md-list-item ng-show="carrier.id">
          <md-input-container class="md-block" layout="column" layout-align="start center">
            <label for="carrierPhoneText">Phone</label>
            <input type="text"
                   ng-model="carrier.attributes.phone"
                   aria-label="Carrier phone number"
                   name="phone"
                   id="carrierPhoneText"
                   disabled>
          </md-input-container>
        </md-list-item>

      </md-list>

      <md-list layout="row" flex-gt-sm ng-show="carrier.id">

        <md-list-item flex="50"
                      ng-show="carrier.attributes.current_city.name">

          <md-input-container class="md-block"
                              layout="column"
                              layout-align="start center">
            <label for="currentCityText">Current city</label>
            <input type="text"
                   ng-model="carrier.attributes.current_city.name"
                   aria-label="Current city of carrier's location"
                   name="currentCityText"
                   id="currentCityText"
                   disabled>
            <div ng-messages="tripForm.currentCityText.$error">
              <div ng-message="required" ng-show="tripForm.currentCityText.$error.required">Current city is required
              </div>
            </div>
          </md-input-container>
        </md-list-item>

        <md-list-item flex="50"
                      ng-show="!!carrier.attributes.current_city.name === false">
          <md-input-container class="md-block"
                              layout="column"
                              layout-align="start center">
            <label for="currentCitySelect">Current city</label>
            <md-select name="currentCitySelect"
                       id="currentCitySelect"
                       ng-model="trip.attributes.from_city.attributes.name"
                       placeholder="Current City">
              <md-optgroup label="Current City">
                <md-option ng-value="city" ng-repeat="city in cities">{{city.attributes.name}}</md-option>
              </md-optgroup>
            </md-select>
            <div ng-messages="tripForm.currentCitySelect.$error">
              <div ng-message="required" ng-show="tripForm.currentCitySelect.$error.required">Current city is required
              </div>
            </div>
          </md-input-container>
        </md-list-item>

        <md-list-item flex="50">
          <md-input-container class="md-block" layout="column" layout-align="start center">
            <label for="destinationCitySelect">Destination City</label>
            <md-select name="destinationCity"
                       id="destinationCitySelect"
                       required
                       ng-model="trip.attributes.destination_city"
                       placeholder="Destination City">
              <md-optgroup label="Destination City">
                <md-option ng-value="city" ng-repeat="city in cities">{{city.attributes.name}}</md-option>
              </md-optgroup>
            </md-select>
            <div ng-messages="tripForm.destinationCity.$error">
              <div ng-message="required" ng-show="tripForm.destinationCity.$error.required">Destination city is
                required
              </div>
            </div>
          </md-input-container>
        </md-list-item>

      </md-list>

      <md-list ng-show="carrier.id">
        <md-list-item>
          <md-input-container class="md-block" layout="column" layout-align="start center">
            <label for="shipmentSizeSelect">Shipment size</label>
            <md-select name="shipmentSize"
                       id="shipmentSizeSelect"
                       required
                       ng-model="trip.attributes.shipment_size"
                       placeholder="Shipment Size">
              <md-optgroup label="Shipment Size">
                <md-option ng-value="size"
                           ng-repeat="size in shipmentSizes">{{size.name}}: {{size.description}}
                </md-option>
              </md-optgroup>
            </md-select>
            <div ng-messages="tripForm.shipmentSize.$error">
              <div ng-message="required"
                   ng-show="tripForm.shipmentSize.$error.required">Shipment Size is required
              </div>
            </div>
            <p class="md-caption"
               ng-show="trip.attributes.shipment_size.attributes.name">
              WLH(cm):{{trip.attributes.shipment_size.attributes.width}}x{{trip.attributes.shipment_size.attributes.length}}x{{trip.attributes.shipment_size.attributes.height}}<br/>
              Max. weight(kg):{{trip.attributes.shipment_size.attributes.width}}</p>
          </md-input-container>
        </md-list-item>

        <md-list-item>
          <div flex layout="row">
            <md-input-container class="md-block" layout="row" layout-align="start center">
              <label for="departureDatePicker">Departure date</label>
              <md-datepicker ng-model="trip.attributes.departure_date"
                             md-placeholder="Departure date"
                             id="departureDatePicker"
                             name="departureDate"
                             md-min-date="minDepartureDate"
                             md-max-date="maxDepartureDate"
                             required
                             aria-label="Trip depature date"></md-datepicker>
              <div ng-messages="tripForm.departureDate.$error">
                <div ng-message="required"
                     ng-show="tripForm.departureDate.$error.required">Departure date is required
                </div>
                <div ng-message="mindate"
                     ng-show="tripForm.departureDate.$error.mindate">Date is too early
                </div>
                <div ng-message="maxdate"
                     ng-show="tripForm.departureDate.$error.maxdate">Date is too late
                </div>
              </div>
            </md-input-container>
            <md-input-container ng-show="trip.attributes.departure_date">
              <label for="departureTimeText">Time</label>
              <input name="departureTime"
                     type="text"
                     size="5"
                     ng-model="trip.attributes.departure_time"
                     aria-label="Trip depature time"
                     id="departureTimeText"
                     placeholder="hh:mm"
                     ng-blur="setExpectedDeliveryDate()"
                     required/>
              <div ng-messages="tripForm.departureTime.$error">
                <div ng-message="required"
                     ng-show="tripForm.departureTime.$error.required">Departure time is required
                </div>
              </div>
            </md-input-container>
          </div>
        </md-list-item>

      </md-list>

    </div>
    <input type="hidden" name="id" ng-value="carrier.id">
  </form>

  <md-button ng-click="saveEntity($event)"
             class="md-primary"
             ng-disabled="tripForm.$invalid || tripForm.$pending || processing">Save
  </md-button>
  <!--<md-button back-button>Back</md-button>-->

</md-content>

<!--<md-fab-toolbar md-open="false" count="0" md-direction="left">
  <md-fab-trigger class="align-with-text">
    <md-button aria-label="Actions menu"
               class="md-fab md-primary">
      <ng-md-icon icon="menu"></ng-md-icon>
      &lt;!&ndash;<md-icon md-svg-src="/img/material-design-icons/menu.svg"
               class="md-light"></md-icon>&ndash;&gt;
    </md-button>
  </md-fab-trigger>

  <md-toolbar>
    <md-fab-actions class="md-toolbar-tools">
      <md-button class="md-fab md-primary"
                 aria-label="Back"
                 back-button>
        <ng-md-icon icon="keyboard_arrow_left"></ng-md-icon>
      </md-button>

    </md-fab-actions>
  </md-toolbar>
</md-fab-toolbar>-->




